{% load static from staticfiles %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="NBA Statistics and Analytics">
    <meta name="author" content="CloadBase">


    <title>NBA Analysis - Power to the Fans.</title>
    <link rel="shortcut icon" href="img/NBA.ico" />
    <!-- Custom fonts for this template-->
    <link href="{% static 'vendor/fontawesome-free/css/all.min.css'%}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <!-- Custom styles for this template-->
    <link href="{% static 'css/nba-admin-2-new.css'%}" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="{% static 'css/custom-new.css'%}" rel="stylesheet">

</head>

<body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">

                <!--================================================
                    NAVBAR
                =================================================-->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
                    <a class="navbar-brand" href="http://192.168.99.100:8000/" style="text-decoration: none;"><strong>NBA Statistics</strong></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <!-- Links Left-->
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item"><a class="nav-link" href="http://192.168.99.100:8000/team">All Teams</a></li>
                            <li class="nav-item"><a class="nav-link" href="http://192.168.99.100:8000/data">Data Science</a></li>
                            <li class="nav-item"><a class="nav-link" href="http://192.168.99.100:8000/about">About Us</a></li>
                        </ul>
                        <!-- Links Right-->
                        <!--<span class="navbar-nav form-inline">
                            <div class="input-group">
                                <input type="text" class="form-control bg-light border-0 small" placeholder="Search" aria-label="Search" aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="button">
                                        <i class="fas fa-search fa-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </span>-->
                    </div>
                </nav>

                <!-- Begin Page Content -->
                <div class="container-fluid">
                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">NBA Data Science</h1>
                    </div>

                    <!-- Content Row -->
                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">NBA Search Popularity (2004 - 2019)</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <div class="chart-area">
                                        <canvas id="myAreaChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="about-text-v2">
                        <div id="about-title-v2">
                            <h3>Data Science is a pritty nifty tool. We will be using data science and Python to perform some Fun Data Science on the graph above.</h3>
                            <br>
                        </div>
                        <p>For this example lets see if NBA popularity is truely increasing. This data tells us that there anual spicks in intrest around March Madness for some reason. Although it sems preitty clear that there is a growing intrest in the NBA as the years go on by, there is an anual cycle in the data which is sometimes misleading. Lets do some fun data science to see if indead there is increasing intrest in the sport. We will be using numpy and pandas as well as matplotlib. These tools and a free ide and documantation can be found at anaconda.com. The data set we will use can be found <a href="https://trends.google.com/trends/explore?date=all&geo=US&q=nba">here.</a></p>

                    </div>

                    <br>

                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Before We begin be sure to include this at the top of the project file.</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <xmp>
                                        import numpy as np
                                        import matplotlib.pyplot as plt
                                        import pandas as pd
                                        from scipy import stats
                                        %matplotlib inline
                                    </xmp>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Create your own scatter plot in Python.</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <xmp>
                                        # Loading data into a Pandas DataFrame.
                                        science = pd.read_csv("nba.csv", skiprows=2)
                                        science['Month'] = pd.to_datetime(science.Month)

                                        # Formating data.
                                        year = science.Month.dt.year
                                        month = science.Month.dt.month
                                        intrest = science['nba: (Colorado)']
                                        science['year'] = science.Month.dt.year
                                        science['month'] = science.Month.dt.month
                                        science['intrest'] = science['nba: (Colorado)']
                                        del science['Month']
                                        del science['nba: (Colorado)']

                                        # Finding data
                                        targetdate = science["year"].index[(science["year"] % 2 == 0) & (science['month'] == 1)]
                                    </xmp>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Create your own line plot in Python.</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <xmp>
                                        # Initialize the figure.
                                        fig, ax = plt.subplots(figsize=(18,4))

                                        # Set x and y
                                        x = science['year'] + ((science['month']-1)/12)
                                        y = intrest

                                        # Set the lables
                                        plt.title("NBA Search Popularity (2004 - 2019)")
                                        plt.xlabel("Year", fontsize = 10)
                                        plt.ylabel("Intrest", fontsize = 10)

                                        # Plot the results
                                        plt.autoscale()
                                        plt.scatter(x, y, facecolor="#1A477B")

                                        # Initialize the figure.
                                        fig, ax = plt.subplots(figsize=(18,4))

                                        # Set x and y
                                        x = science['year'] + ((science['month']-1)/12)
                                        y = intrest

                                        # Set the lables
                                        plt.title("NBA Search Popularity (2004 - 2019)")
                                        plt.xlabel("Year", fontsize = 10)
                                        plt.ylabel("Intrest", fontsize = 10)

                                        # Plot the results
                                        plt.xticks(science.loc[targetdate, 'year'])
                                        plt.autoscale()
                                        plt.plot(x, y, color= "#1A477B")
                                    </xmp>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div id="about-text-v2">
                        <p>Now that we are feeling good. Lets run our tests. We will use a significance level of 99% for the hypothesis test. Since there is no reason to belive that the trend is non linear. We will also assume our alpha is 5%, i.e. 0.05. While were here lets set up our null hypothisis; it represents: "The NBA has not seen any increase in popularity." The alternitive hypothisis here represents "The NBA is growing in popularity."</p>
                        <br>
                        <br>
                        <p>We can use now use Pthon to compute the p-value and r-value associated with the hypothesis test. As hardcore data scientists we will caclulate these values by hand. THese means no coding shortcuts. We will use 5 equations to find our anwer. If your curious they are integrated into the code below.</p>
                    </div>



                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Python code to compute the p-value and r-value associated with our hypothesis test.</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <xmp>
                                        # Initiate required variables
                                        betaHatNumerator = 0
                                        betaHatDenominator = 0
                                        SEbSumation = 0
                                        SSE = 0
                                        SST = 0
                                        i = 0

                                        # While loop to handle the sumations.
                                        while i less then 16:
                                        # Running summation part only for SE beta.
                                        SEbSumation += pow((x[i] - np.mean(x)),2)

                                        # Running all beta hat sumation parts.
                                        betaHatNumerator += ((x[i] - np.mean(x))*(y[i] - np.mean(y)))
                                        betaHatDenominator += pow((x[i] - np.mean(x)),2)

                                        # Complete SSE equation.
                                        SSE = SSE + pow((y[i]-(aHat + bHat * x[i])),2)

                                        # SST equation requred for finding R^2 for part I.
                                        SST += pow((y[i] - np.mean(y)),2)

                                        i = i + 1

                                        # Complete beta hat equation.
                                        betaHat = betaHatNumerator/betaHatDenominator

                                        # Complete alpha hat equation.
                                        alphaHat = np.sqrt(SSE/(16-2))

                                        # Complete SE Beta equation.
                                        # Place here to avoid error.
                                        SEBetaHat = alphaHat/np.sqrt(SEbSumation)

                                        # Finding R^2 for part I.
                                        rSquared = 1 - (SSE/SST)

                                        # T equation is integrated in.
                                        # Display the results
                                        print("The p-value associated with the hypothesis test from Part B: ", end="")
                                        print(1-stats.t.cdf(bHat/SEBetaHat, df = 16-2))

                                        print("R squared for the problem: ", end="")
                                        print(round(rSquared,4))
                                    </xmp>
                                </div>
                            </div>
                        </div>
                    </div>

                    <br>



                    <div id="about-text-v2">
                        <div id="about-title-v2">
                            <h3>Yay! we did it now lets bring it all together.</h3>
                            <br>
                        </div>

                        <p>Our Results:</p>
                        <p>The p-value associated with the hypothesis test from Part B: 0.09411790823729693</p>
                        <p>R squared for the problem: 0.4247</p>
                        <br>

                        <p>Its well known in the data science indistry that if 𝑅2 is close to 1, then the model fits the data relatively well. R-squared is a statistical measure of how close the data is to the regression line. In our case we can see that our 𝑅2 is around 0.80. We think thats pritty good since some models get accepted at 50%. We can also see that the hypothesis and significance are differnt. The small p value means we can reject the null hypothesis. Our slope is not equal to zero. Since our slope is not equal to zero and has a positive value it means there is an increase in popularity. Awsome.</p>
                        <p><strong>*It is no suprise that intrest in this great spot has incresed. We would argue that we play ahonarble roll in this grouth. As we here at NBA Statistics take grate pride in bringing our visores up to date statistics and fun data science. Mathy fun for the whole family, and power to the player.</strong></p>
                    </div>

                    <div class="row">
                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-12">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Bonus: Calculating a simple linear regression model.</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <xmp>
                                        NBA = pd.DataFrame(columns=["year", "interest"], index = range(16))

                                        i = 0
                                        XY = 0
                                        xSquared = 0

                                        # While loop to handle the sumations.
                                        while i less then 16:
                                        year = 2004 + i

                                        # Pull year and intrest
                                        NBA.loc[i].year = year
                                        NBA.loc[i].interest = science[science["year"] == year]["intrest"].mean()

                                        XY += x[i] * y[i]
                                        xSquared += pow((x[i]),2)
                                        i = i + 1

                                        # Convering to list for x (year) and y (interest)
                                        x = NBA["year"].tolist()
                                        y = NBA["interest"].tolist()

                                        bHat = (16 * XY - (np.sum(x) * np.sum(y))) / (16 * xSquared - pow(np.sum(x),2))
                                        aHat = (np.sum(y) * xSquared - np.sum(x) * XY) / (16 * xSquared - pow(np.sum(x),2))

                                        # Display the results
                                        print("The simple linear regression model: ", end="")
                                        print(round(aHat,4), end=" + ")
                                        print(round(bHat,4), end="(x) ")
                                    </xmp>
                                </div>
                            </div>
                        </div>
                    </div>





                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->
            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container">
                    <div class="copyright text-center my-auto">
                        <span>Copyrights © 2019 All Rights Reserved by NBA Statistics, Inc.</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->
        </div>
        <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up fa-1x"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="{% static 'vendor/jquery/jquery.min.js'%}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
    <!-- Core plugin JavaScript-->
    <script src="{% static 'vendor/jquery-easing/jquery.easing.min.js'%}"></script>
    <!-- Custom scripts for all pages-->
    <script src="{% static 'js/nba-admin-2.min.js'%}"></script>
    <!-- Page level plugins -->
    <script src="{% static 'vendor/chart.js/Chart.min.js'%}"></script>
    <!-- Page level custom scripts -->
    <script src="{% static 'js/data-chart.js'%}"></script>
    <script src="{% static 'js/chart-pie.js'%}"></script>
</body>

</html>